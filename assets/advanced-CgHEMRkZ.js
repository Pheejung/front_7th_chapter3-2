import{r as b,R as se,j as s,a as De}from"./client-BdDDBfAG.js";const M={BASE_URL:"/front_7th_chapter3-2/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function xe(e){return"init"in e}function G(e){return!!e.write}function le(e){return"v"in e||"e"in e}function R(e){if("e"in e)throw e.e;if((M?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v}const B=new WeakMap;function fe(e){var t;return O(e)&&!!((t=B.get(e))!=null&&t[0])}function Ee(e){const t=B.get(e);t?.[0]&&(t[0]=!1,t[1].forEach(n=>n()))}function Q(e,t){let n=B.get(e);if(!n){n=[!0,new Set],B.set(e,n);const o=()=>{n[0]=!1};e.then(o,o)}n[1].add(t)}function O(e){return typeof e?.then=="function"}function he(e,t,n){if(!n.p.has(e)){n.p.add(e);const o=()=>n.p.delete(e);t.then(o,o)}}function pe(e,t,n){var o;const r=new Set;for(const c of((o=n.get(e))==null?void 0:o.t)||[])n.has(c)&&r.add(c);for(const c of t.p)r.add(c);return r}const Ie=(e,t,...n)=>t.read(...n),Ve=(e,t,...n)=>t.write(...n),Le=(e,t)=>{var n;return(n=t.unstable_onInit)==null?void 0:n.call(t,e)},Re=(e,t,n)=>{var o;return(o=t.onMount)==null?void 0:o.call(t,n)},Be=(e,t)=>{var n;const o=C(e),r=o[0],c=o[6],a=o[9];if((M?"production":void 0)!=="production"&&!t)throw new Error("Atom is undefined or null");let i=r.get(t);return i||(i={d:new Map,p:new Set,n:0},r.set(t,i),(n=c.i)==null||n.call(c,t),a?.(e,t)),i},Oe=e=>{const t=C(e),n=t[1],o=t[3],r=t[4],c=t[5],a=t[6],i=t[13],m=[],u=l=>{try{l()}catch(x){m.push(x)}};do{a.f&&u(a.f);const l=new Set,x=l.add.bind(l);o.forEach(p=>{var h;return(h=n.get(p))==null?void 0:h.l.forEach(x)}),o.clear(),c.forEach(x),c.clear(),r.forEach(x),r.clear(),l.forEach(u),o.size&&i(e)}while(o.size||c.size||r.size);if(m.length)throw new AggregateError(m)},qe=e=>{const t=C(e),n=t[1],o=t[2],r=t[3],c=t[11],a=t[14],i=t[17],m=[],u=new WeakSet,l=new WeakSet,x=Array.from(r);for(;x.length;){const p=x[x.length-1],h=c(e,p);if(l.has(p)){x.pop();continue}if(u.has(p)){if(o.get(p)===h.n)m.push([p,h]);else if((M?"production":void 0)!=="production"&&o.has(p))throw new Error("[Bug] invalidated atom exists");l.add(p),x.pop();continue}u.add(p);for(const y of pe(p,h,n))u.has(y)||x.push(y)}for(let p=m.length-1;p>=0;--p){const[h,y]=m[p];let g=!1;for(const f of y.d.keys())if(f!==h&&r.has(f)){g=!0;break}g&&(a(e,h),i(e,h)),o.delete(h)}},K=new WeakSet,$e=(e,t)=>{var n,o;const r=C(e),c=r[1],a=r[2],i=r[3],m=r[6],u=r[7],l=r[11],x=r[12],p=r[13],h=r[14],y=r[16],g=r[17],f=l(e,t);if(le(f)&&(c.has(t)&&a.get(t)!==f.n||Array.from(f.d).every(([d,v])=>h(e,d).n===v)))return f;f.d.clear();let j=!0;function w(){c.has(t)&&(g(e,t),p(e),x(e))}function k(d){var v;if(d===t){const A=l(e,d);if(!le(A))if(xe(d))q(e,d,d.init);else throw new Error("no atom init");return R(A)}const N=h(e,d);try{return R(N)}finally{f.d.set(d,N.n),fe(f.v)&&he(t,f.v,N),(v=c.get(d))==null||v.t.add(t),j||w()}}let S,T;const F={get signal(){return S||(S=new AbortController),S.signal},get setSelf(){return(M?"production":void 0)!=="production"&&!G(t)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&G(t)&&(T=(...d)=>{if((M?"production":void 0)!=="production"&&j&&console.warn("setSelf function cannot be called in sync"),!j)try{return y(e,t,...d)}finally{p(e),x(e)}}),T}},L=f.n;try{(M?"production":void 0)!=="production"&&K.delete(e);const d=u(e,t,k,F);return(M?"production":void 0)!=="production"&&K.has(e)&&console.warn("Detected store mutation during atom read. This is not supported."),q(e,t,d),O(d)&&(Q(d,()=>S?.abort()),d.then(w,w)),(n=m.r)==null||n.call(m,t),f}catch(d){return delete f.v,f.e=d,++f.n,f}finally{j=!1,L!==f.n&&a.get(t)===L&&(a.set(t,f.n),i.add(t),(o=m.c)==null||o.call(m,t))}},We=(e,t)=>{const n=C(e),o=n[1],r=n[2],c=n[11],a=[t];for(;a.length;){const i=a.pop(),m=c(e,i);for(const u of pe(i,m,o)){const l=c(e,u);r.set(u,l.n),a.push(u)}}},ge=(e,t,...n)=>{const o=C(e),r=o[3],c=o[6],a=o[8],i=o[11],m=o[12],u=o[13],l=o[14],x=o[15],p=o[17];let h=!0;const y=f=>R(l(e,f)),g=(f,...j)=>{var w;const k=i(e,f);try{if(f===t){if(!xe(f))throw new Error("atom not writable");(M?"production":void 0)!=="production"&&K.add(e);const S=k.n,T=j[0];q(e,f,T),p(e,f),S!==k.n&&(r.add(f),(w=c.c)==null||w.call(c,f),x(e,f));return}else return ge(e,f,...j)}finally{h||(u(e),m(e))}};try{return a(e,t,y,g,...n)}finally{h=!1}},Fe=(e,t)=>{var n;const o=C(e),r=o[1],c=o[3],a=o[6],i=o[11],m=o[15],u=o[18],l=o[19],x=i(e,t),p=r.get(t);if(p&&!fe(x.v)){for(const[h,y]of x.d)if(!p.d.has(h)){const g=i(e,h);u(e,h).t.add(t),p.d.add(h),y!==g.n&&(c.add(h),(n=a.c)==null||n.call(a,h),m(e,h))}for(const h of p.d||[])if(!x.d.has(h)){p.d.delete(h);const y=l(e,h);y?.t.delete(t)}}},be=(e,t)=>{var n;const o=C(e),r=o[1],c=o[4],a=o[6],i=o[10],m=o[11],u=o[12],l=o[13],x=o[14],p=o[16],h=m(e,t);let y=r.get(t);if(!y){x(e,t);for(const g of h.d.keys())be(e,g).t.add(t);if(y={l:new Set,d:new Set(h.d.keys()),t:new Set},r.set(t,y),(n=a.m)==null||n.call(a,t),G(t)){const g=()=>{let f=!0;const j=(...w)=>{try{return p(e,t,...w)}finally{f||(l(e),u(e))}};try{const w=i(e,t,j);w&&(y.u=()=>{f=!0;try{w()}finally{f=!1}})}finally{f=!1}};c.add(g)}}return y},He=(e,t)=>{var n;const o=C(e),r=o[1],c=o[5],a=o[6],i=o[11],m=o[19],u=i(e,t);let l=r.get(t);if(l&&!l.l.size&&!Array.from(l.t).some(x=>{var p;return(p=r.get(x))==null?void 0:p.d.has(t)})){l.u&&c.add(l.u),l=void 0,r.delete(t),(n=a.u)==null||n.call(a,t);for(const x of u.d.keys()){const p=m(e,x);p?.t.delete(t)}return}return l},q=(e,t,n)=>{const o=C(e)[11],r=o(e,t),c="v"in r,a=r.v;if(O(n))for(const i of r.d.keys())he(t,n,o(e,i));r.v=n,delete r.e,(!c||!Object.is(a,r.v))&&(++r.n,O(a)&&Ee(a))},ze=(e,t)=>{const n=C(e)[14];return R(n(e,t))},Je=(e,t,...n)=>{const o=C(e),r=o[12],c=o[13],a=o[16];try{return a(e,t,...n)}finally{c(e),r(e)}},Ue=(e,t,n)=>{const o=C(e),r=o[12],c=o[18],a=o[19],m=c(e,t).l;return m.add(n),r(e),()=>{m.delete(n),a(e,t),r(e)}},ye=new WeakMap,C=e=>{const t=ye.get(e);if((M?"production":void 0)!=="production"&&!t)throw new Error("Store must be created by buildStore to read its building blocks");return t};function Ge(...e){const t={get(o){const r=C(t)[21];return r(t,o)},set(o,...r){const c=C(t)[22];return c(t,o,...r)},sub(o,r){const c=C(t)[23];return c(t,o,r)}},n=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},Ie,Ve,Le,Re,Be,Oe,qe,$e,We,ge,Fe,be,He,q,ze,Je,Ue,void 0].map((o,r)=>e[r]||o);return ye.set(t,Object.freeze(n)),t}const ve={};let Qe=0;function D(e,t){const n=`atom${++Qe}`,o={toString(){return(ve?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?o.read=e:(o.init=e,o.read=Ke,o.write=Ye),t&&(o.write=t),o}function Ke(e){return e(this)}function Ye(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}function ne(){return Ge()}let I;function Xe(){return I||(I=ne(),(ve?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=I),globalThis.__JOTAI_DEFAULT_STORE__!==I&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),I}const Ze={},Y=b.createContext(void 0);function je(e){return b.useContext(Y)||Xe()}function et({children:e,store:t}){const n=b.useRef(null);return t?b.createElement(Y.Provider,{value:t},e):(n.current===null&&(n.current=ne()),b.createElement(Y.Provider,{value:n.current},e))}const X=e=>typeof e?.then=="function",Z=e=>{e.status||(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}))},tt=se.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Z(e),e)}),H=new WeakMap,de=(e,t)=>{let n=H.get(e);return n||(n=new Promise((o,r)=>{let c=e;const a=u=>l=>{c===u&&o(l)},i=u=>l=>{c===u&&r(l)},m=()=>{try{const u=t();X(u)?(H.set(u,n),c=u,u.then(a(u),i(u)),Q(u,m)):o(u)}catch(u){r(u)}};e.then(a(e),i(e)),Q(e,m)}),H.set(e,n)),n};function _(e,t){const{delay:n,unstable_promiseStatus:o=!se.use}={},r=je(),[[c,a,i],m]=b.useReducer(l=>{const x=r.get(e);return Object.is(l[0],x)&&l[1]===r&&l[2]===e?l:[x,r,e]},void 0,()=>[r.get(e),r,e]);let u=c;if((a!==r||i!==e)&&(m(),u=r.get(e)),b.useEffect(()=>{const l=r.sub(e,()=>{if(o)try{const x=r.get(e);X(x)&&Z(de(x,()=>r.get(e)))}catch{}if(typeof n=="number"){setTimeout(m,n);return}m()});return m(),l},[r,e,n,o]),b.useDebugValue(u),X(u)){const l=de(u,()=>r.get(e));return o&&Z(l),tt(l)}return u}function we(e,t){const n=je();return b.useCallback((...r)=>{if((Ze?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...r)},[n,e])}function E(e,t){return[_(e),we(e)]}const st=(e,t)=>{const{discounts:n}=e.product,{quantity:o}=e,r=n.reduce((a,i)=>o>=i.quantity&&i.rate>a?i.rate:a,0);return t.some(a=>a.quantity>=10)?Math.min(r+.05,.5):r},Ne=(e,t)=>{const{price:n}=e.product,{quantity:o}=e,r=st(e,t);return Math.round(n*o*(1-r))},ue=(e,t)=>{let n=0,o=0;return e.forEach(r=>{const c=r.product.price*r.quantity;n+=c,o+=Ne(r,e)}),t&&(t.discountType==="amount"?o=Math.max(0,o-t.discountValue):o=Math.round(o*(1-t.discountValue/100))),{totalBeforeDiscount:Math.round(n),totalAfterDiscount:Math.round(o)}},ee=(e,t)=>{const n=t.find(r=>r.product.id===e.id);return e.stock-(n?.quantity||0)},nt=(e,t)=>{if(!t)return e;const n=t.toLowerCase();return e.filter(o=>{const r=o.name.toLowerCase().includes(n),c="description"in o&&typeof o.description=="string"&&o.description.toLowerCase().includes(n);return r||c})},ot=(e,t)=>e.discountType==="percentage"&&t<1e4?{canApply:!1,reason:"percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다."}:{canApply:!0},rt=(e,t)=>e.some(n=>n.code===t),at=(e,t,n,o)=>n&&o&&ee(n,o)<=0?"SOLD OUT":t?`${e.toLocaleString()}원`:`₩${e.toLocaleString()}`,ct=()=>`ORD-${Date.now()}`,oe={},it=Symbol((oe?"production":void 0)!=="production"?"RESET":""),ke=e=>typeof e?.then=="function";function lt(e=()=>{try{return window.localStorage}catch(n){(oe?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let o,r;const c={getItem:(m,u)=>{var l,x;const p=y=>{if(y=y||"",o!==y){try{r=JSON.parse(y,t?.reviver)}catch{return u}o=y}return r},h=(x=(l=e())==null?void 0:l.getItem(m))!=null?x:null;return ke(h)?h.then(p):p(h)},setItem:(m,u)=>{var l;return(l=e())==null?void 0:l.setItem(m,JSON.stringify(u,void 0))},removeItem:m=>{var u;return(u=e())==null?void 0:u.removeItem(m)}},a=m=>(u,l,x)=>m(u,p=>{let h;try{h=JSON.parse(p||"")}catch{h=x}l(h)});let i;try{i=(n=e())==null?void 0:n.subscribe}catch{}return!i&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(i=(m,u)=>{if(!(e()instanceof window.Storage))return()=>{};const l=x=>{x.storageArea===e()&&x.key===m&&u(x.newValue)};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}}),i&&(c.subscribe=a(i)),c}const dt=lt();function re(e,t,n=dt,o){const r=D(t);return(oe?"production":void 0)!=="production"&&(r.debugPrivate=!0),r.onMount=a=>{a(n.getItem(e,t));let i;return n.subscribe&&(i=n.subscribe(e,a,t)),i},D(a=>a(r),(a,i,m)=>{const u=typeof m=="function"?m(a(r)):m;return u===it?(i(r,t),n.removeItem(e)):ke(u)?u.then(l=>(i(r,l),n.setItem(e,l))):(i(r,u),n.setItem(e,u))})}const te=D([]),$=re("products",[]),Se=re("coupons",[]),ae=re("cart",[]),Ce=D(null),W=D(!1),ce=D(""),V=()=>{const e=_(te),t=we(te),n=b.useCallback((r,c="success")=>{const a=Date.now().toString();t(i=>[...i,{id:a,message:r,type:c}]),setTimeout(()=>{t(i=>i.filter(m=>m.id!==a))},3e3)},[]),o=b.useCallback(r=>{t(c=>c.filter(a=>a.id!==r))},[]);return{toasts:e,addToast:n,removeToast:o}},Ae=()=>{const e=_($),[t,n]=E(ae),[o,r]=E(Ce),{addToast:c}=V(),a=b.useCallback(g=>{if(ee(g,t)<=0){c("재고가 부족합니다!","error");return}n(j=>{const w=j.find(k=>k.product.id===g.id);return w&&w.quantity+1>g.stock?(c(`재고는 ${g.stock}개까지만 있습니다.`,"error"),j):w?j.map(k=>k.product.id===g.id?{...k,quantity:k.quantity+1}:k):[...j,{product:g,quantity:1}]}),c("장바구니에 담았습니다","success")},[c,t,n]),i=b.useCallback(g=>{n(f=>f.filter(j=>j.product.id!==g))},[n]),m=b.useCallback((g,f)=>{if(f<=0){i(g);return}const j=e.find(k=>k.id===g);if(!j)return;const w=j.stock;if(f>w){c(`재고는 ${w}개까지만 있습니다.`,"error");return}n(k=>k.map(S=>S.product.id===g?{...S,quantity:f}:S))},[c,e,i,n]),u=b.useCallback(g=>{const f=ue(t,o).totalAfterDiscount,{canApply:j,reason:w}=ot(g,f);if(!j&&w){c(w,"error");return}r(g),c("쿠폰이 적용되었습니다.","success")},[c,t,o]),l=b.useCallback(()=>{r(null)},[]),x=b.useCallback(()=>{const g=ct();c(`주문이 완료되었습니다. 주문번호: ${g}`,"success"),n([]),r(null)},[c,n]),p=b.useCallback(g=>ee(g,t),[t]),h=b.useCallback(g=>Ne(g,t),[t]),y=b.useMemo(()=>ue(t,o),[t,o]);return{cart:t,selectedCoupon:o,addToCart:a,removeFromCart:i,updateQuantity:m,applyCoupon:u,removeCoupon:l,completeOrder:x,getRemainingStock:p,calculateItemTotal:h,totals:y}},ut=()=>{const{cart:e}=Ae(),[t,n]=E(W),[o,r]=E(ce),c=b.useMemo(()=>e.reduce((a,i)=>a+i.quantity,0),[e]);return s.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!t&&s.jsx("div",{className:"ml-8 flex-1 max-w-md",children:s.jsx("input",{type:"text",value:o,onChange:a=>r(a.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),s.jsxs("nav",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>n(a=>!a),className:`px-3 py-1.5 text-sm rounded transition-colors ${t?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:t?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!t&&s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.length>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:c})]})]})]})})})},Me=()=>{const[e,t]=E($),{addToast:n}=V(),o=b.useCallback(a=>{const i={...a,id:`p${Date.now()}`};t(m=>[...m,i]),n("상품이 추가되었습니다.","success")},[n,t]),r=b.useCallback((a,i)=>{t(m=>m.map(u=>u.id===a?{...u,...i}:u)),n("상품이 수정되었습니다.","success")},[n,t]),c=b.useCallback(a=>{t(i=>i.filter(m=>m.id!==a)),n("상품이 삭제되었습니다.","success")},[n,t]);return{products:e,addProduct:o,updateProduct:r,deleteProduct:c}},_e=()=>{const[e,t]=E(Se),{addToast:n}=V(),o=b.useCallback(c=>{if(rt(e,c.code)){n("이미 존재하는 쿠폰 코드입니다.","error");return}t(a=>[...a,c]),n("쿠폰이 추가되었습니다.","success")},[n,e,t]),r=b.useCallback(c=>{t(a=>a.filter(i=>i.code!==c)),n("쿠폰이 삭제되었습니다.","success")},[n,t]);return{coupons:e,addCoupon:o,deleteCoupon:r}},Te=()=>{const e=_(W),t=_($),n=_(ae);return b.useCallback((o,r)=>{const c=r?t.find(a=>a.id===r):void 0;return at(o,e,c,n)},[n,e,t])},mt=e=>e<0?{isValid:!1,errorMessage:"가격은 0보다 커야 합니다"}:e>1e7?{isValid:!1,errorMessage:"가격은 10,000,000원을 초과할 수 없습니다"}:{isValid:!0},xt=e=>e<0?{isValid:!1,errorMessage:"재고는 0보다 커야 합니다"}:e>9999?{isValid:!1,errorMessage:"재고는 9999개를 초과할 수 없습니다"}:{isValid:!0},ft=e=>e<0?{isValid:!1,errorMessage:"할인율은 0% 이상이어야 합니다"}:e>100?{isValid:!1,errorMessage:"할인율은 100%를 초과할 수 없습니다"}:{isValid:!0},ht=e=>e<0?{isValid:!1,errorMessage:"할인 금액은 0원 이상이어야 합니다"}:e>1e5?{isValid:!1,errorMessage:"할인 금액은 100,000원을 초과할 수 없습니다"}:{isValid:!0},z=e=>/^\d+$/.test(e),P=(e,t=0)=>{if(e==="")return t;const n=parseInt(e);return isNaN(n)?t:n},ie=({className:e="w-4 h-4"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),me=({className:e="w-5 h-5"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),pt=({className:e="w-24 h-24"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),gt=({className:e="w-8 h-8"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),bt=({className:e="w-5 h-5"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),yt=({className:e="text-xs"})=>s.jsx("span",{className:e,children:"−"}),vt=({className:e="text-xs"})=>s.jsx("span",{className:e,children:"+"}),jt=()=>{const[e,t]=b.useState("products"),[n,o]=b.useState(!1),[r,c]=b.useState(null),[a,i]=b.useState({name:"",price:0,stock:0,description:"",discounts:[]}),[m,u]=b.useState(!1),[l,x]=b.useState({name:"",code:"",discountType:"amount",discountValue:0}),{products:p,addProduct:h,updateProduct:y,deleteProduct:g}=Me(),{coupons:f,addCoupon:j,deleteCoupon:w}=_e(),k=Te(),{addToast:S}=V(),T=d=>{d.preventDefault(),r&&r!=="new"?y(r,a):h(a),i({name:"",price:0,stock:0,description:"",discounts:[]}),c(null),o(!1)},F=d=>{d.preventDefault(),j(l),x({name:"",code:"",discountType:"amount",discountValue:0}),u(!1)},L=d=>{c(d.id),i({name:d.name,price:d.price,stock:d.stock,description:d.description||"",discounts:d.discounts||[]}),o(!0)};return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),s.jsx("div",{className:"border-b border-gray-200 mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>t("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${e==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),s.jsx("button",{onClick:()=>t("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${e==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),e==="products"&&s.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),s.jsx("button",{onClick:()=>{c("new"),i({name:"",price:0,stock:0,description:"",discounts:[]}),o(!0)},className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(d=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:d.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(d.price,d.id)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.stock>10?"bg-green-100 text-green-800":d.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[d.stock,"개"]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:d.description||"-"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>L(d),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),s.jsx("button",{onClick:()=>g(d.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},d.id))})]})}),n&&s.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r==="new"?"새 상품 추가":"상품 수정"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),s.jsx("input",{type:"text",value:a.name,onChange:d=>i({...a,name:d.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),s.jsx("input",{type:"text",value:a.description,onChange:d=>i({...a,description:d.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),s.jsx("input",{type:"text",value:a.price===0?"":a.price,onChange:d=>{const v=d.target.value;(v===""||z(v))&&i({...a,price:P(v,0)})},onBlur:d=>{const v=P(d.target.value,0),N=mt(v);N.isValid||(S(N.errorMessage,"error"),i({...a,price:0}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),s.jsx("input",{type:"text",value:a.stock===0?"":a.stock,onChange:d=>{const v=d.target.value;(v===""||z(v))&&i({...a,stock:P(v,0)})},onBlur:d=>{const v=P(d.target.value,0),N=xt(v);N.isValid||(S(N.errorMessage,"error"),i({...a,stock:0}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),s.jsxs("div",{className:"space-y-2",children:[a.discounts.map((d,v)=>s.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[s.jsx("input",{type:"number",value:d.quantity,onChange:N=>{const A=[...a.discounts];A[v].quantity=parseInt(N.target.value)||0,i({...a,discounts:A})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),s.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),s.jsx("input",{type:"number",value:d.rate*100,onChange:N=>{const A=[...a.discounts];A[v].rate=(parseInt(N.target.value)||0)/100,i({...a,discounts:A})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),s.jsx("span",{className:"text-sm",children:"% 할인"}),s.jsx("button",{type:"button",onClick:()=>{const N=a.discounts.filter((A,Pe)=>Pe!==v);i({...a,discounts:N})},className:"text-red-600 hover:text-red-800",children:s.jsx(ie,{})})]},v)),s.jsx("button",{type:"button",onClick:()=>{i({...a,discounts:[...a.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:()=>{c(null),i({name:"",price:0,stock:0,description:"",discounts:[]}),o(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:r==="new"?"추가":"수정"})]})]})})]}),e==="coupons"&&s.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[f.map(d=>s.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:d.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:d.code}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:d.discountType==="amount"?`${d.discountValue.toLocaleString()}원 할인`:`${d.discountValue}% 할인`})})]}),s.jsx("button",{onClick:()=>w(d.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(bt,{})})]})},d.code)),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:s.jsxs("button",{onClick:()=>u(!m),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[s.jsx(gt,{}),s.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),m&&s.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:s.jsxs("form",{onSubmit:F,className:"space-y-4",children:[s.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),s.jsx("input",{type:"text",value:l.name,onChange:d=>x({...l,name:d.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),s.jsx("input",{type:"text",value:l.code,onChange:d=>x({...l,code:d.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),s.jsxs("select",{value:l.discountType,onChange:d=>x({...l,discountType:d.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[s.jsx("option",{value:"amount",children:"정액 할인"}),s.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l.discountType==="amount"?"할인 금액":"할인율(%)"}),s.jsx("input",{type:"text",value:l.discountValue===0?"":l.discountValue,onChange:d=>{const v=d.target.value;(v===""||z(v))&&x({...l,discountValue:P(v,0)})},onBlur:d=>{const v=P(d.target.value,0);if(l.discountType==="percentage"){const N=ft(v);N.isValid||(S(N.errorMessage,"error"),x({...l,discountValue:0}))}else{const N=ht(v);N.isValid||(S(N.errorMessage,"error"),x({...l,discountValue:0}))}},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:l.discountType==="amount"?"5000":"10",required:!0})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})]})]})]})},wt=(e,t=500)=>{const[n,o]=b.useState(e);return b.useEffect(()=>{const r=setTimeout(()=>{o(e)},t);return()=>{clearTimeout(r)}},[e,t]),n},Nt=({product:e,onAddToCart:t,formatPrice:n,getRemainingStock:o})=>{const r=o(e),c=e.discounts.length>0?Math.max(...e.discounts.map(a=>a.rate)):0;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:s.jsx(pt,{className:"w-24 h-24 text-gray-300"})}),e.isRecommended&&s.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),e.discounts.length>0&&s.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",c*100,"%"]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-lg font-bold text-gray-900",children:n(e.price,e.id)}),e.discounts.length>0&&s.jsxs("p",{className:"text-xs text-gray-500",children:[e.discounts[0].quantity,"개 이상 구매시 할인 ",e.discounts[0].rate*100,"%"]})]}),s.jsxs("div",{className:"mb-3",children:[r<=5&&r>0&&s.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",r,"개 남음"]}),r>5&&s.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",r,"개"]})]}),s.jsx("button",{onClick:()=>t(e),disabled:r<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${r<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:r<=0?"품절":"장바구니 담기"})]})]})},kt=({products:e,searchTerm:t,onAddToCart:n,formatPrice:o,getRemainingStock:r})=>s.jsxs("section",{children:[s.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),s.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",e.length,"개 상품"]})]}),e.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsxs("p",{className:"text-gray-500",children:['"',t,'"에 대한 검색 결과가 없습니다.']})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(c=>s.jsx(Nt,{product:c,onAddToCart:n,formatPrice:o,getRemainingStock:r},c.id))})]}),St=({item:e,onRemove:t,onUpdateQuantity:n,calculateItemTotal:o})=>{const r=o(e),c=e.product.price*e.quantity,a=r<c,i=a?Math.round((1-r/c)*100):0;return s.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:e.product.name}),s.jsx("button",{onClick:()=>t(e.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:s.jsx(ie,{})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>n(e.product.id,e.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:s.jsx(yt,{})}),s.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:e.quantity}),s.jsx("button",{onClick:()=>n(e.product.id,e.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:s.jsx(vt,{})})]}),s.jsxs("div",{className:"text-right",children:[a&&s.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",i,"%"]}),s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(r).toLocaleString(),"원"]})]})]})]})},Ct=({coupons:e,selectedCoupon:t,onApply:n,onRemove:o})=>s.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),s.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),e.length>0&&s.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:t?.code||"",onChange:r=>{const c=e.find(a=>a.code===r.target.value);c?n(c):o()},children:[s.jsx("option",{value:"",children:"쿠폰 선택"}),e.map(r=>s.jsxs("option",{value:r.code,children:[r.name," (",r.discountType==="amount"?`${r.discountValue.toLocaleString()}원`:`${r.discountValue}%`,")"]},r.code))]})]}),At=({cart:e,coupons:t,selectedCoupon:n,onRemoveFromCart:o,onUpdateQuantity:r,onApplyCoupon:c,onRemoveCoupon:a,onCompleteOrder:i,calculateItemTotal:m,calculateCartTotal:u})=>{const l=u();return s.jsxs("div",{className:"sticky top-24 space-y-4",children:[s.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(me,{className:"w-5 h-5 mr-2"}),"장바구니"]}),e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(me,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):s.jsx("div",{className:"space-y-3",children:e.map(x=>s.jsx(St,{item:x,onRemove:o,onUpdateQuantity:r,calculateItemTotal:m},x.product.id))})]}),e.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Ct,{coupons:t,selectedCoupon:n,onApply:c,onRemove:a}),s.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"상품 금액"}),s.jsxs("span",{className:"font-medium",children:[l.totalBeforeDiscount.toLocaleString(),"원"]})]}),l.totalBeforeDiscount-l.totalAfterDiscount>0&&s.jsxs("div",{className:"flex justify-between text-red-500",children:[s.jsx("span",{children:"할인 금액"}),s.jsxs("span",{children:["-",(l.totalBeforeDiscount-l.totalAfterDiscount).toLocaleString(),"원"]})]}),s.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[s.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),s.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[l.totalAfterDiscount.toLocaleString(),"원"]})]})]}),s.jsxs("button",{onClick:i,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[l.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),s.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:s.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]})]})]})},Mt=()=>{const{products:e}=Me(),{cart:t,selectedCoupon:n,addToCart:o,removeFromCart:r,updateQuantity:c,applyCoupon:a,removeCoupon:i,completeOrder:m,getRemainingStock:u,calculateItemTotal:l,totals:x}=Ae(),{coupons:p}=_e(),h=Te(),y=_(ce),g=wt(y,500),f=b.useMemo(()=>nt(e,g),[e,g]),j=b.useCallback(()=>x,[x]);return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-3",children:s.jsx(kt,{products:f,searchTerm:g,onAddToCart:o,formatPrice:h,getRemainingStock:u})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(At,{cart:t,coupons:p,selectedCoupon:n,onRemoveFromCart:r,onUpdateQuantity:c,onApplyCoupon:a,onRemoveCoupon:i,onCompleteOrder:m,calculateItemTotal:l,calculateCartTotal:j})})]})},_t=({id:e,message:t,type:n,onClose:o})=>{const r=n==="error"?"bg-red-600":n==="warning"?"bg-yellow-600":"bg-green-600";return s.jsxs("div",{className:`${r} p-4 rounded-md shadow-md text-white flex justify-between items-center animate-slide-in`,role:"alert",children:[s.jsx("span",{className:"mr-2",children:t}),s.jsx("button",{onClick:()=>o(e),className:"text-white hover:text-gray-200 transition-colors","aria-label":"알림 닫기",children:s.jsx(ie,{})})]})},Tt=({toasts:e,onClose:t})=>e.length===0?null:s.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:e.map(n=>s.jsx(_t,{...n,onClose:t},n.id))}),Pt=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],Dt=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],J={products:"products",coupons:"coupons",cart:"cart"},U=(e,t)=>{if(typeof window>"u")return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`[storage] Failed to parse key "${e}"`,n),t}},Et=()=>{const e=_(W),{toasts:t,removeToast:n}=V();return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(Tt,{toasts:t,onClose:n}),s.jsx(ut,{}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e?s.jsx(jt,{}):s.jsx(Mt,{})})]})},It=()=>{const[e]=b.useState(()=>{const t=ne();return t.set($,U(J.products,Pt)),t.set(Se,U(J.coupons,Dt)),t.set(ae,U(J.cart,[])),t.set(te,[]),t.set(Ce,null),t.set(W,!1),t.set(ce,""),t});return s.jsx(et,{store:e,children:s.jsx(Et,{})})};De.createRoot(document.getElementById("root")).render(s.jsx(se.StrictMode,{children:s.jsx(It,{})}));
